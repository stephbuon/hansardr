bind_tf_idf(word, period, n) %>%
group_by(period) %>%
slice_max(tf_idf, n = 15) %>%
ggplot(aes(tf_idf,
reorder(word, tf_idf),
fill = period)) +
geom_col(show.legend = FALSE) +
facet_wrap(~period, ncol = 2, scales = "free") +
labs(x = "TF-IDF", y = "Word")
keyword_search <- crimea_data_periodized %>%
filter(str_detect(text, "outdoor relief"))
keyword_count <- keyword_search %>%
mutate(count = str_count(text, "outdoor relief")) %>%
mutate(yearmonth = floor_date(speechdate, "month")) %>%
group_by(yearmonth) %>%
summarize(count = sum(count))
ggplot(keyword_count, aes(x = yearmonth, y = count)) +
geom_col() +
ggtitle("How Many Times Was Outdoor Relief Mentioned?")
library(quanteda)
top_month <- keyword_search %>%
filter(speechdate >= "1850-02-01")  %>%
filter(speechdate <= "1850-02-28")
top_month_kwic <- corpus(top_month, text_field = "text")
kwic(tokens(top_month_kwic),
"outdoor",
window = 5,
case_insensitive = TRUE)
data("speaker_metadata_1860")
speaker_metadata_1860 <- speaker_metadata_1860 %>%
select(sentence_id, suggested_speaker)
head(speaker_metadata_1860)
hansard_1860 <- left_join(hansard_1860, speaker_metadata_1860)
speaker_count <- hansard_1860 %>%
filter(suggested_speaker %in% c("william_gladstone_3104", "benjamin_disraeli_3523")) %>%
unnest_tokens(word, text)  %>%
anti_join(stop_words) %>%
filter(!str_detect(word, "[:digit:]"))  %>%
count(suggested_speaker, word, sort = TRUE) %>%
filter(n > 1)
total_count <- speaker_count %>%
group_by(suggested_speaker) %>%
summarize(total = sum(n))
hansard_words <- left_join(speaker_count, total_count)
hansard_tf_idf <- hansard_words %>%
bind_tf_idf(word, suggested_speaker, n)
hansard_tf_idf <- hansard_tf_idf %>%
group_by(suggested_speaker) %>%
slice_max(tf_idf, n = 15)
ggplot(hansard_tf_idf,
aes(tf_idf, reorder(word, tf_idf), fill = suggested_speaker)) +
geom_col(show.legend = FALSE) +
facet_wrap(~suggested_speaker, ncol = 2, scales = "free") +
labs(x = "TF-IDF", y = "Word")
data("hansard_1830")
data("hansard_1860")
hansard_1830 <- hansard_1830 %>%
unnest_tokens(word, text) %>%
anti_join(stop_words) %>%
filter(!str_detect(word, "[:digit:]")) %>%
mutate(period = 1830)
hansard_1860 <- hansard_1860 %>%
unnest_tokens(word, text) %>%
anti_join(stop_words) %>%
filter(!str_detect(word, "[:digit:]")) %>%
mutate(period = 1860)
data("hansard_1830")
data("hansard_1860")
hansard_1830 <- hansard_1830 %>%
unnest_tokens(word, text) %>%
anti_join(stop_words) %>%
filter(!str_detect(word, "[:digit:]")) %>%
mutate(period = 1830)
hansard_1860 <- hansard_1860 %>%
unnest_tokens(word, text) %>%
anti_join(stop_words) %>%
filter(!str_detect(word, "[:digit:]")) %>%
mutate(period = 1860)
library(dhmeasures)
hansard <- bind_rows(hansard_1830, hansard_1860)
hansard_jsd <- jsd(hansard, group = "period")
data("hansard_1830")
data("hansard_1860")
hansard_1830 <- hansard_1830 %>%
unnest_tokens(word, text) %>%
anti_join(stop_words) %>%
filter(!str_detect(word, "[:digit:]")) %>%
mutate(corpus = 1830)
hansard_1860 <- hansard_1860 %>%
unnest_tokens(word, text) %>%
anti_join(stop_words) %>%
filter(!str_detect(word, "[:digit:]")) %>%
mutate(corpus = 1860)
library(dhmeasures)
hansard <- bind_rows(hansard_1830, hansard_1860)
hansard_jsd <- jsd(hansard, group = "corpus")
require(devtools)
install_github("stephbuon/dhmeasures")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(hansardr)
data("hansard_1870")
hansard_woman_1870 <- hansard_1870 %>%
filter(str_detect(text, regex("woman|women", ignore_case = T)))
library(tidyverse)
library(hansardr)
data("hansard_1870")
hansard_woman_1870 <- hansard_1870 %>%
filter(str_detect(text, regex("woman|women", ignore_case = T)))
data("debate_metadata_1870")
debate_metadata_1870 <- debate_metadata_1870 %>%
select(sentence_id, speechdate)
hansard_woman_1870 <- left_join(hansard_woman_1870, debate_metadata_1870)
filtered_hansard_woman_1870 <- hansard_woman_1870 %>%
select(text)
filtered_hansard_woman_1870 <- hansard_woman_1870 %>%
select(text)
adjective_noun_pairs <- extract_adj_noun_pairs(filtered_hansard_woman_1870$text)
library(posextractr)
posextract_install()
require(devtools)
install_github("stephbuon/posextractr")
library("posextractr")
posextract_install()
library("posextractr")
posextract_install()
library("posextractr")
posextract_install()
posextract_install()
require(devtools)
install_github("stephbuon/posextractr")
library("posextractr")
posextract_install()
Y
require(devtools)
install_github("stephbuon/posextractr")
library("posextractr")
posextract_install()
require(devtools)
install_github("stephbuon/posextractr")
require(devtools)
install_github("stephbuon/posextractr")
library("posextractr")
posextract_install()
require(devtools)
install_github("stephbuon/posextractr")
library("posextractr")
posextract_install()
posextract_install()
Y
posextract_initialize()
knitr::opts_chunk$set(echo = TRUE)
library(posextractr)
posextract_install()
Y
posextract_initialize()
library(tidyverse)
library(hansardr)
data("hansard_1870")
hansard_woman_1870 <- hansard_1870 %>%
filter(str_detect(text, regex("woman|women", ignore_case = T)))
head(hansard_woman_1870)
data("debate_metadata_1870")
debate_metadata_1870 <- debate_metadata_1870 %>%
select(sentence_id, speechdate)
hansard_woman_1870 <- left_join(hansard_woman_1870, debate_metadata_1870)
head(hansard_woman_1870)
filtered_hansard_woman_1870 <- hansard_woman_1870 %>%
select(text)
adjective_noun_pairs <- extract_adj_noun_pairs(filtered_hansard_woman_1870$text, lemmatize = T)
library(posextractr)
adjective_noun_pairs <- extract_adj_noun_pairs(filtered_hansard_woman_1870$text, lemmatize = T)
require(devtools)
install_github("stephbuon/posextractr")
require(devtools)
install_github("stephbuon/posextractr")
library("posextractr")
posextract_install()
Y
posextract_initialize()
adjective_noun_pairs <- extract_adj_noun_pairs(filtered_hansard_woman_1870$text, lemmatize = T)
adjective_noun_pairs <- extract_adj_noun_pairs(filtered_hansard_woman_1870$text, lemmatize = T)
library(posextractr)
triples <- extract_triples(hansard_woman_1870$text,
combine_adj = F,
lemmatize = T,
add_aux = F)
knitr::opts_chunk$set(echo = TRUE)
library(posextractr)
posextract_install()
posextract_initialize()
library(tidyverse)
library(hansardr)
data("hansard_1870")
hansard_woman_1870 <- hansard_1870 %>%
filter(str_detect(text, regex("woman|women", ignore_case = T)))
head(hansard_woman_1870)
data("debate_metadata_1870")
debate_metadata_1870 <- debate_metadata_1870 %>%
select(sentence_id, speechdate)
hansard_woman_1870 <- left_join(hansard_woman_1870, debate_metadata_1870)
head(hansard_woman_1870)
filtered_hansard_woman_1870 <- hansard_woman_1870 %>%
select(text)
adjective_noun_pairs <- extract_adj_noun_pairs(filtered_hansard_woman_1870$text, lemmatize = T)
library(posextractr)
adjective_noun_pairs <- extract_adj_noun_pairs(filtered_hansard_woman_1870$text, lemmatize = T)
test <- hansard_woman_1870 %>%
sample_n(1000)
triples <- extract_triples(test$text,
combine_adj = F,
lemmatize = T,
add_aux = F)
library(posextractr)
posextract_install()
Y
posextract_initialize()
adjective_noun_pairs <- extract_adj_noun_pairs(filtered_hansard_woman_1870$text, lemmatize = T)
library(dplyr)
library(lubridate)
library(data.table)
sample <- TRUE
dataverse_dir <- "~/projects/hansard-corpus/dataverse_upload/"
hansard <- fread("/home/stephbuon/data/hansard_justnine_w_year.csv") %>%
mutate(year = year(speechdate)) %>%
mutate(decade = year - year %% 10)
library(dplyr)
library(lubridate)
library(data.table)
sample <- TRUE
dataverse_dir <- "~/projects/hansard-corpus/dataverse_upload/"
hansard <- fread("/home/stephbuon/research_data/hansard_justnine_w_year.csv") %>%
mutate(year = year(speechdate)) %>%
mutate(decade = year - year %% 10)
hansard_decade <- hansard %>%
select(sentence_id, decade)
hansard_speakers <- fread("/home/stephbuon/research_data/hansard_results.csv")
hansard_speakers <- left_join(hansard_speakers, hansard_decade, by = "sentence_id")
View(hansard_speakers)
hansard <- hansard %>%
group_by(decade) %>%
sample_n(10)
View(hansard)
sample <- TRUE
if(sample == TRUE) {
hansard <- hansard %>%
group_by(decade) %>%
sample_n(10)
hansard_speakers <- hansard_speakers %>%
group_by(decade) %>%
sample_n(10) }
setwd("~/projects/hansardr/data")
speaker_metadata_1800 <- hansard_speakers %>%
filter(decade == 1800) %>%
select(-decade)
fwrite(speaker_metadata_1800, paste0(dataverse_dir, "speaker_metadata_1800.csv"))
save(speaker_metadata_1800, file="data/speaker_metadata_1800.RData")
speaker_metadata_1800 <- hansard_speakers %>%
filter(decade == 1800) %>%
select(-decade)
fwrite(speaker_metadata_1800, paste0(dataverse_dir, "speaker_metadata_1800.csv"))
setwd("~/projects/hansardr")
speaker_metadata_1800 <- hansard_speakers %>%
filter(decade == 1800) %>%
select(-decade)
fwrite(speaker_metadata_1800, paste0(dataverse_dir, "speaker_metadata_1800.csv"))
save(speaker_metadata_1800, file="data/speaker_metadata_1800.RData")
rm(speaker_metadata_1800)
speaker_metadata_1810 <- hansard_speakers  %>%
filter(decade == 1810) %>%
select(-decade)
fwrite(speaker_metadata_1810, paste0(dataverse_dir, "speaker_metadata_1810.csv"))
save(speaker_metadata_1810, file="data/speaker_metadata_1810.RData")
rm(speaker_metadata_1810)
speaker_metadata_1820 <- hansard_speakers  %>%
filter(decade == 1820) %>%
select(-decade)
fwrite(speaker_metadata_1820, paste0(dataverse_dir, "speaker_metadata_1820.csv"))
save(speaker_metadata_1820, file="data/speaker_metadata_1820.RData")
rm(speaker_metadata_1820)
speaker_metadata_1830 <- hansard_speakers  %>%
filter(decade == 1830) %>%
select(-decade)
fwrite(speaker_metadata_1830, paste0(dataverse_dir, "speaker_metadata_1830.csv"))
save(speaker_metadata_1830, file="data/speaker_metadata_1830.RData")
speaker_metadata_1840 <- hansard_speakers  %>%
filter(decade == 1840) %>%
select(-decade)
fwrite(speaker_metadata_1840, paste0(dataverse_dir, "speaker_metadata_1840.csv"))
save(speaker_metadata_1840, file="data/speaker_metadata_1840.RData")
speaker_metadata_1850 <- hansard_speakers  %>%
filter(decade == 1850) %>%
select(-decade)
fwrite(speaker_metadata_1850, paste0(dataverse_dir, "speaker_metadata_1850.csv"))
save(speaker_metadata_1850, file="data/speaker_metadata_1850.RData")
speaker_metadata_1860 <- hansard_speakers  %>%
filter(decade == 1860) %>%
select(-decade)
fwrite(speaker_metadata_1860, paste0(dataverse_dir, "speaker_metadata_1860.csv"))
save(speaker_metadata_1860, file="data/speaker_metadata_1860.RData")
rm(speaker_metadata_1860)
speaker_metadata_1870 <- hansard_speakers  %>%
filter(decade == 1870) %>%
select(-decade)
fwrite(speaker_metadata_1870, paste0(dataverse_dir, "speaker_metadata_1870.csv"))
save(speaker_metadata_1870, file="data/speaker_metadata_1870.RData")
rm(speaker_metadata_1870)
speaker_metadata_1880 <- hansard_speakers  %>%
filter(decade == 1880) %>%
select(-decade)
fwrite(speaker_metadata_1880, paste0(dataverse_dir, "speaker_metadata_1880.csv"))
save(speaker_metadata_1880, file="data/speaker_metadata_1880.RData")
speaker_metadata_1890 <- hansard_speakers  %>%
filter(decade == 1890) %>%
select(-decade)
fwrite(speaker_metadata_1890, paste0(dataverse_dir, "speaker_metadata_1890.csv"))
save(speaker_metadata_1890, file="data/speaker_metadata_1890.RData")
speaker_metadata_1900 <- hansard_speakers  %>%
filter(decade == 1900) %>%
select(-decade)
fwrite(speaker_metadata_1900, paste0(dataverse_dir, "speaker_metadata_1900.csv"))
save(speaker_metadata_1900, file="data/speaker_metadata_1900.RData")
debate_metadata_1800 <- hansard %>%
filter(decade == 1800) %>%
select(sentence_id, speechdate, debate)
fwrite(debate_metadata_1800, paste0(dataverse_dir, "debate_metadata_1800.csv"))
save(debate_metadata_1800, file="data/debate_metadata_1800.RData")
debate_metadata_1810 <- hansard %>%
filter(decade == 1810) %>%
select(sentence_id, speechdate, debate)
fwrite(debate_metadata_1810, paste0(dataverse_dir, "debate_metadata_1810.csv"))
save(debate_metadata_1810, file="data/debate_metadata_1810.RData")
debate_metadata_1820 <- hansard %>%
filter(decade == 1820) %>%
select(sentence_id, speechdate, debate)
fwrite(debate_metadata_1820, paste0(dataverse_dir, "debate_metadata_1820.csv"))
save(debate_metadata_1820, file="data/debate_metadata_1820.RData")
debate_metadata_1830 <- hansard %>%
filter(decade == 1830) %>%
select(sentence_id, speechdate, debate)
fwrite(debate_metadata_1830, paste0(dataverse_dir, "debate_metadata_1830.csv"))
save(debate_metadata_1830, file="data/debate_metadata_1830.RData")
debate_metadata_1840 <- hansard %>%
filter(decade == 1840) %>%
select(sentence_id, speechdate, debate)
fwrite(debate_metadata_1840, paste0(dataverse_dir, "debate_metadata_1840.csv"))
save(debate_metadata_1840, file="data/debate_metadata_1840.RData")
rm(debate_metadata_1840)
debate_metadata_1850 <- hansard %>%
filter(decade == 1850) %>%
select(sentence_id, speechdate, debate)
fwrite(debate_metadata_1850, paste0(dataverse_dir, "debate_metadata_1850.csv"))
save(debate_metadata_1850, file="data/debate_metadata_1850.RData")
rm(debate_metadata_1850)
debate_metadata_1860 <- hansard %>%
filter(decade == 1860) %>%
select(sentence_id, speechdate, debate)
fwrite(debate_metadata_1860, paste0(dataverse_dir, "debate_metadata_1860.csv"))
save(debate_metadata_1860, file="data/debate_metadata_1860.RData")
rm(debate_metadata_1860)
debate_metadata_1870 <- hansard %>%
filter(decade == 1870) %>%
select(sentence_id, speechdate, debate)
fwrite(debate_metadata_1870, paste0(dataverse_dir, "debate_metadata_1870.csv"))
save(debate_metadata_1870, file="data/debate_metadata_1870.RData")
debate_metadata_1880 <- hansard %>%
filter(decade == 1880) %>%
select(sentence_id, speechdate, debate)
fwrite(debate_metadata_1880, paste0(dataverse_dir, "debate_metadata_1880.csv"))
save(debate_metadata_1880, file="data/debate_metadata_1880.RData")
debate_metadata_1890 <- hansard %>%
filter(decade == 1890) %>%
select(sentence_id, speechdate, debate)
fwrite(debate_metadata_1890, paste0(dataverse_dir, "debate_metadata_1890.csv"))
save(debate_metadata_1890, file="data/debate_metadata_1890.RData")
rm(debate_metadata_1890)
debate_metadata_1900 <- hansard %>%
filter(decade == 1900) %>%
select(sentence_id, speechdate, debate)
fwrite(debate_metadata_1900, paste0(dataverse_dir, "debate_metadata_1900.csv"))
save(debate_metadata_1900, file="data/debate_metadata_1900.RData")
rm(debate_metadata_1900)
file_metadata_1800 <- hansard %>%
filter(decade == 1800) %>%
select(sentence_id, speech_id, debate_id, src_file_id, src_image, src_column)
fwrite(file_metadata_1800, paste0(dataverse_dir, "file_metadata_1800.csv"))
save(file_metadata_1800, file="data/file_metadata_1800.RData")
rm(file_metadata_1800)
file_metadata_1810 <- hansard %>%
filter(decade == 1810) %>%
select(sentence_id, speech_id, debate_id, src_file_id, src_image, src_column)
fwrite(file_metadata_1810, paste0(dataverse_dir, "file_metadata_1810.csv"))
save(file_metadata_1810, file="data/file_metadata_1810.RData")
file_metadata_1820 <- hansard %>%
filter(decade == 1820) %>%
select(sentence_id, speech_id, debate_id, src_file_id, src_image, src_column)
fwrite(file_metadata_1820, paste0(dataverse_dir, "file_metadata_1820.csv"))
save(file_metadata_1820, file="data/file_metadata_1820.RData")
file_metadata_1830 <- hansard %>%
filter(decade == 1830) %>%
select(sentence_id, speech_id, debate_id, src_file_id, src_image, src_column)
fwrite(file_metadata_1830, paste0(dataverse_dir, "file_metadata_1830.csv"))
save(file_metadata_1830, file="data/file_metadata_1830.RData")
file_metadata_1840 <- hansard %>%
filter(decade == 1840) %>%
select(sentence_id, speech_id, debate_id, src_file_id, src_image, src_column)
fwrite(file_metadata_1840, paste0(dataverse_dir, "file_metadata_1840.csv"))
save(file_metadata_1840, file="data/file_metadata_1840.RData")
rm(file_metadata_1840)
file_metadata_1850 <- hansard %>%
filter(decade == 1850) %>%
select(sentence_id, speech_id, debate_id, src_file_id, src_image, src_column)
fwrite(file_metadata_1850, paste0(dataverse_dir, "file_metadata_1850.csv"))
save(file_metadata_1850, file="data/file_metadata_1850.RData")
rm(file_metadata_1850)
file_metadata_1860 <- hansard %>%
filter(decade == 1860) %>%
select(sentence_id, speech_id, debate_id, src_file_id, src_image, src_column)
fwrite(file_metadata_1860, paste0(dataverse_dir, "file_metadata_1860.csv"))
save(file_metadata_1860, file="data/file_metadata_1860.RData")
rm(file_metadata_1860)
file_metadata_1870 <- hansard %>%
filter(decade == 1870) %>%
select(sentence_id, speech_id, debate_id, src_file_id, src_image, src_column)
fwrite(file_metadata_1870, paste0(dataverse_dir, "file_metadata_1870.csv"))
save(file_metadata_1870, file="data/file_metadata_1870.RData")
rm(file_metadata_1870)
file_metadata_1880 <- hansard %>%
filter(decade == 1880) %>%
select(sentence_id, speech_id, debate_id, src_file_id, src_image, src_column)
fwrite(file_metadata_1880, paste0(dataverse_dir, "file_metadata_1880.csv"))
save(file_metadata_1880, file="data/file_metadata_1880.RData")
rm(file_metadata_1880)
file_metadata_1890 <- hansard %>%
filter(decade == 1880) %>%
select(sentence_id, speech_id, debate_id, src_file_id, src_image, src_column)
fwrite(file_metadata_1890, paste0(dataverse_dir, "file_metadata_1890.csv"))
save(file_metadata_1890, file="data/file_metadata_1890.RData")
rm(file_metadata_1890)
file_metadata_1900 <- hansard %>%
filter(decade == 1900) %>%
select(sentence_id, speech_id, debate_id, src_file_id, src_image, src_column)
fwrite(file_metadata_1900, paste0(dataverse_dir, "file_metadata_1900.csv"))
save(file_metadata_1900, file="data/file_metadata_1900.RData")
rm(file_metadata_1900)
hansard_1800 <- hansard %>%
filter(decade == 1800) %>%
select(sentence_id, text)
fwrite(hansard_1800, paste0(dataverse_dir, "hansard_1800.csv"))
save(hansard_1800, file="data/hansard_1800.RData")
rm(hansard_1800)
hansard_1810 <- hansard %>%
filter(decade == 1810) %>%
select(sentence_id, text)
fwrite(hansard_1810, paste0(dataverse_dir, "hansard_1810.csv"))
save(hansard_1810, file="data/hansard_1810.RData")
rm(hansard_1810)
hansard_1820 <- hansard %>%
filter(decade == 1820) %>%
select(sentence_id, text)
fwrite(hansard_1820, paste0(dataverse_dir, "hansard_1820.csv"))
save(hansard_1820, file="data/hansard_1820.RData")
rm(hansard_1820)
hansard_1830 <- hansard %>%
filter(decade == 1830) %>%
select(sentence_id, text)
fwrite(hansard_1830, paste0(dataverse_dir, "hansard_1830.csv"))
save(hansard_1830, file="data/hansard_1830.RData")
rm(hansard_1830)
hansard_1840 <- hansard %>%
filter(decade == 1840) %>%
select(sentence_id, text)
fwrite(hansard_1840, paste0(dataverse_dir, "hansard_1840.csv"))
save(hansard_1840, file="data/hansard_1840.RData")
rm(hansard_1840)
hansard_1850 <- hansard %>%
filter(decade == 1850) %>%
select(sentence_id, text)
fwrite(hansard_1850, paste0(dataverse_dir, "hansard_1850.csv"))
save(hansard_1850, file="data/hansard_1850.RData")
rm(hansard_1850)
hansard_1860 <- hansard %>%
filter(decade == 1860) %>%
select(sentence_id, text)
fwrite(hansard_1860, paste0(dataverse_dir, "hansard_1860.csv"))
save(hansard_1860, file="data/hansard_1860.RData")
rm(hansard_1860)
hansard_1870 <- hansard %>%
filter(decade == 1870) %>%
select(sentence_id, text)
fwrite(hansard_1870, paste0(dataverse_dir, "hansard_1870.csv"))
save(hansard_1870, file="data/hansard_1870.RData")
rm(hansard_1870)
hansard_1880 <- hansard %>%
filter(decade == 1880) %>%
select(sentence_id, text)
fwrite(hansard_1880, paste0(dataverse_dir, "hansard_1880.csv"))
save(hansard_1880, file="data/hansard_1880.RData")
rm(hansard_1880)
hansard_1890 <- hansard %>%
filter(decade == 1890) %>%
select(sentence_id, text)
fwrite(hansard_1890, paste0(dataverse_dir, "hansard_1890.csv"))
save(hansard_1890, file="data/hansard_1890.RData")
rm(hansard_1890)
hansard_1900 <- hansard %>%
filter(decade == 1900) %>%
select(sentence_id, text)
fwrite(hansard_1900, paste0(dataverse_dir, "hansard_1900.csv"))
save(hansard_1900, file="data/hansard_1900.RData")
rm(hansard_1900)
tools::resaveRdaFiles("data/")
